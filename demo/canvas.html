<!DOCTYPE HTML>
<html>
<head>
	<title>Knob - Canvas</title>
	<link rel="stylesheet" href="asset/ui.css" />
	<script src="../Knob.js"></script>

</head>
<body>
	<div id="shapePositionContainer" class="container">
		<canvas id="shapePosition"></canvas>
	</div>
	<div id="shapeRotateContainer" class="container">
		<canvas id="shapeRotate"></canvas>
	</div>
	<div id="shapePositionRotateContainer" class="container">
		<canvas id="shapePositionRotate"></canvas>
	</div>

	<div id="settings">
		<div><label for="knobAngle">Angle: </label><input type="text" id="knobAngle" size="5" value="0"/></div>
		<div><label for="knobValue">Value: </label><input type="text" id="knobValue" size="5" value="0"/></div>

		<div><label for="scrollingX">ScrollingX: </label><input type="checkbox" id="scrollingX" checked/></div>
		<div><label for="scrollingY">ScrollingY: </label><input type="checkbox" id="scrollingY" checked/></div>

		<div><label for="minZoom">Min Zoom: </label><input type="text" id="minZoom" size="5" value="0.5"/></div>
		<div><label for="maxZoom">Max Zoom: </label><input type="text" id="maxZoom" size="5" value="3"/></div>
		<div><label for="zoomLevel">Zoom Level: </label><input type="text" id="zoomLevel" size="5"/></div>
		<div><button id="zoom">Zoom to Level</button><button id="zoomIn">+</button><button id="zoomOut">-</button></div>
	</div>
<!--
-->


	<!-- mouse/touch events -->
	<script src="asset/ui.js"></script>

 	<!-- Custom rendering code -->
	<script type="text/javascript">


	var fillCircle = function(context, x, y, radius) {
		context.beginPath();
		context.arc(x, y, radius, 0, Math.PI*2, true);
		context.closePath();
		context.fill();
	}

	var drawKnobBody = function(context, knob) {
		var knobRadius = 25;

		//draw the knob background
		context.fillStyle = "#008";
		fillCircle(context, knob.__clientWidth/2, knob.__clientHeight/2, knobRadius);
	};

	var drawPositionIndicator = function(context, knob, indicator) {
		var indicatorRadius = 4;
		context.fillStyle = "#efefef";
		fillCircle(context, indicator.x, indicator.y, indicatorRadius);
	};

	var drawRotateIndicator = function(context, knob, indicator) {
		var knobRadius = 25,
			indicatorW = knobRadius*2,
			indicatorH = 5;

		context.save();

		context.translate(knob.__clientWidth/2, knob.__clientHeight/2);
		context.rotate(-indicator.angle*(Math.PI/180));

		//draw the knob indicator
		context.fillStyle = "#efefef";
		context.fillRect(-indicatorW/2, -indicatorH/2, indicatorW, indicatorH);

		context.restore();
	};

	var drawPositionRotateIndicator = function(context, knob, indicator) {
		var knobRadius = 25,
			indicatorW = 10,
			indicatorH = 5;

		context.save();

		context.translate(indicator.x, indicator.y);
		context.rotate(-indicator.angle*(Math.PI/180));

		//draw the knob indicator
		context.fillStyle = "#efefef";
		context.fillRect(-indicatorW/2, -indicatorH/2, indicatorW, indicatorH);

		context.restore();
	};

	var drawKnob = function(context, knob, indicator, drawIndicatorFn) {
		context.clearRect(0, 0, knob.__clientWidth, knob.__clientWidth);

		//draw the knob
		drawKnobBody(context, knob)

		//draw the indicator
		drawIndicatorFn(context, knob, indicator)
	}

	var shapePositionKnobContainer = document.getElementById("shapePositionContainer");
	var shapePositionKnobContext = document.getElementById("shapePosition").getContext('2d');
	var shapePositionKnob = new Knob(function(knobData) {
			drawKnob(shapePositionKnobContext, knobData.knob, knobData.indicator, drawPositionIndicator);
		}, {
		angleStart:-400,
		angleEnd:360,
		valueMin:0,
		valueMax:100,
		indicatorRadius: 18,
		indicatorStartAngle: 0,
		indicatorAutoPosition: true
	});


	var shapeRotateKnobContainer = document.getElementById("shapeRotateContainer");
	var shapeRotateKnobContext = document.getElementById("shapeRotate").getContext('2d');
	var shapeRotateKnob = new Knob(function(knobData) {
			drawKnob(shapeRotateKnobContext, knobData.knob, knobData.indicator, drawRotateIndicator);
		}, {
		angleStart:-400,
		angleEnd:360,
		valueMin:0,
		valueMax:100,
		indicatorStartAngle: 0,
		indicatorAutoRotate: true
	});


	var shapePositionRotateKnobContainer = document.getElementById("shapePositionRotateContainer");
	var shapePositionRotateKnobContext = document.getElementById("shapePositionRotate").getContext('2d');
	var shapePositionRotateKnob = new Knob(function(knobData) {
			drawKnob(shapePositionRotateKnobContext, knobData.knob, knobData.indicator, drawPositionRotateIndicator);
		}, {
		angleStart:-400,
		angleEnd:360,
		indicatorRadius: 20,
		indicatorStartAngle: 0,
		indicatorAutoPosition: true,
		indicatorAutoRotate: true
	});


	setupKnob(shapePositionKnob, shapePositionKnobContainer);
	setupKnob(shapeRotateKnob, shapeRotateKnobContainer);
	setupKnob(shapePositionRotateKnob, shapePositionRotateKnobContainer);

	</script>


</body>
</html>
