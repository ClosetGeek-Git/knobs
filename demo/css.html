<!DOCTYPE HTML>
<html>
<head>
	<title>Knob - Canvas</title>
	<link rel="stylesheet" href="asset/ui.css" />
	<style type="text/css">
		label.ui-knob { display: block; }
		input.ui-knob-input, .min-width-480px input.ui-knob-input { display: inline-block; width: 50px; }
		div.ui-knob {
			position: relative;
			display: inline-block;
			overflow: visible;
			width: 64px;
			height: 64px;
			padding: 0px;

			border:1px solid #ddd;
			border-radius:50px;

			/* center the div */
			top:50%;
			left:50%;
			/* margin top/left is set by jquery so we don't have to do the math here */
			/*margin-top:-42px; /* = -(height/2 + border + padding-top) */
			/*margin-left:-42px;/* = -(width/2 + border + padding-left) */

		}
		#cssPositionIndicator {
			position: absolute;
			display: block;
			z-index: 10;
			width: 10px;
			height: 10px;
			margin: 0;
			padding: 0;
			border-radius:8px;
		}

		#cssRotateIndicator {
			position: absolute;
			display: block;
			z-index: 10;
			width: 64px;
			height: 10px;
			margin: 0;
			padding: 0;
			border-radius:3px;

			/* center the div */
			top:50%;
			left:50%;
			margin-top:-5px; /* = -(height/2 + border + padding-top) */
			margin-left:-33px;/* = -(width/2 + border + padding-left) */
		}

		#cssPositionRotateIndicator {
			position: absolute;
			display: block;
			z-index: 10;
			width: 10px;
			height: 6px;
			margin: 0;
			padding: 0;
			border-radius:3px;
		}

		div.ui-knob-handle .ui-btn-inner { padding-left: 0; padding-right: 0; }

		div.ui-knob-inneroffset { margin-left: 50%; position: absolute; top: 1px; height: 100%; width: 50%; }

		.ui-shadow {
			-moz-box-shadow: 0px 1px 4px 			rgba(0,0,0,.3);
			-webkit-box-shadow: 0px 1px 4px 		rgba(0,0,0,.3);
			box-shadow: 0px 1px 4px 				rgba(0,0,0,.3);
		}

		.ui-btn-corner-all {
			-moz-border-radius: 				1em;
			-webkit-border-radius: 				1em;
			border-radius: 						1em;
		}
		.ui-btn-up {
			border: 0px solid 		#ccc;
			background: 			#eee;
			font-weight: bold;
			color: 					#444;
			text-shadow: 0 1px 1px #f6f6f6;
			background-image: -moz-linear-gradient(top,
									#fefefe,
									#eeeeee);
			background-image: -webkit-gradient(linear,left top,left bottom,
				color-stop(0, 		#fdfdfd),
				color-stop(1, 		#ddd));
			-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorStr='#fdfdfd', EndColorStr='#eeeeee')";
		}
		.ui-btn-down {
			border: 1px solid 		#808080;
			background: 			#fdfdfd;
			font-weight: bold;
			color: 					#111111;
			text-shadow: 0 1px 1px 	#ffffff;
			background-image: -moz-linear-gradient(top,
									#eeeeee,
									#fdfdfd);
			background-image: -webkit-gradient(linear,left top,left bottom,
				color-stop(0, 		#eeeeee),
				color-stop(1, 		#ddd));
			-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorStr='#eeeeee', EndColorStr='#fdfdfd')";
		}
		.ui-btn-up,
		.ui-btn-hover,
		.ui-btn-down {
			font-family: Helvetica, Arial, sans-serif;
			text-decoration: none;
		}

	</style>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script src="../Knob.js"></script>

</head>
<body>
	<div id="cssPositionContainer" class="container">
		<div id="cssPosition" class="ui-knob ui-btn-up ui-btn-corner-all ui-shadow"></div>
		<div id="cssPositionIndicator" class="ui-knob-handle ui-btn-down"></div>
	</div>

	<div id="cssRotateContainer" class="container">
		<div id="cssRotate" class="ui-knob ui-btn-up ui-btn-corner-all ui-shadow">
		</div>
		<div id="cssRotateIndicator" class="ui-btn-down"></div>
	</div>

	<div id="cssPositionRotateContainer" class="container">
		<div id="cssPositionRotate" class="ui-knob ui-btn-up ui-btn-corner-all ui-shadow">
		</div>
		<div id="cssPositionRotateIndicator" class="ui-btn-down"></div>
	</div>

	<div id="settings">
		<div><label for="knobAngle">Angle: </label><input type="text" id="knobAngle" size="5" value="0"/></div>
		<div><label for="knobValue">Value: </label><input type="text" id="knobValue" size="5" value="0"/></div>

		<div><label for="scrollingX">ScrollingX: </label><input type="checkbox" id="scrollingX" checked/></div>
		<div><label for="scrollingY">ScrollingY: </label><input type="checkbox" id="scrollingY" checked/></div>

		<div><label for="minZoom">Min Zoom: </label><input type="text" id="minZoom" size="5" value="0.5"/></div>
		<div><label for="maxZoom">Max Zoom: </label><input type="text" id="maxZoom" size="5" value="3"/></div>
		<div><label for="zoomLevel">Zoom Level: </label><input type="text" id="zoomLevel" size="5"/></div>
		<div><button id="zoom">Zoom to Level</button><button id="zoomIn">+</button><button id="zoomOut">-</button></div>
	</div>
<!--
-->


	<!-- mouse/touch events -->
	<script src="asset/ui.js"></script>

	<!-- Custom rendering code -->
	<script type="text/javascript">


	var fillCircle = function(context, x, y, radius) {
		context.beginPath();
		context.arc(x, y, radius, 0, Math.PI*2, true);
		context.closePath();
		context.fill();
	}

	var cssPositionKnobContainer = document.getElementById("cssPositionContainer");
	var cssPositionKnobBody = $(document.getElementById("cssPosition"));
	var cssPositionKnobIndicator = $(document.getElementById("cssPositionIndicator"));

	// Calculate margins to center knob in container
	// Use jquery so we can avoid calculating border/padding in the CSS declaration
	cssPositionKnobBody.css({
		"margin-top":-(cssPositionKnobBody.outerHeight()/2),
		"margin-left":-(cssPositionKnobBody.outerWidth()/2),
	})

	var cssPositionKnob = new Knob(function(knobData) {
			cssPositionKnobIndicator.css({
				left: knobData.indicator.x - cssPositionKnobIndicator.outerWidth()/2,
				top:  knobData.indicator.y - cssPositionKnobIndicator.outerHeight()/2
			});
		}, {
		angleStart:-400,
		angleEnd:360,
		valueMin:0,
		valueMax:100,
		indicatorRadius: cssPositionKnobBody.outerWidth()/2-cssPositionKnobIndicator.outerWidth()/2 - 5,
		indicatorStartAngle: 0,
		indicatorAutoPosition: true
	});

	var cssRotateKnobContainer = document.getElementById("cssRotateContainer");
	var cssRotateKnobBody = $(document.getElementById("cssRotate"));
	var cssRotateKnobIndicator = $(document.getElementById("cssRotateIndicator"));

	// Calculate margins to center knob in container
	// Use jquery so we can avoid calculating border/padding in the CSS declaration
	cssRotateKnobBody.css({
		"margin-top":-(cssRotateKnobBody.outerHeight()/2),
		"margin-left":-(cssRotateKnobBody.outerWidth()/2),
	})

	var cssRotateKnob = new Knob(function(knobData) {
			var rotateText = 'rotate('+(-knobData.indicator.angle)+'deg)';
			cssRotateKnobIndicator.css({
				'transform': rotateText,
				'-moz-transform': rotateText,
				'-o-transform': rotateText,
				'-webkit-transform': rotateText
			});
		}, {
		angleStart:-400,
		angleEnd:360,
		valueMin:0,
		valueMax:100,
		indicatorStartAngle: 0,
		indicatorAutoRotate: true
	});



	var cssPositionRotateKnobContainer = document.getElementById("cssPositionRotateContainer");
	var cssPositionRotateKnobBody = $(document.getElementById("cssPositionRotate"));
	var cssPositionRotateKnobIndicator = $(document.getElementById("cssPositionRotateIndicator"));

	// Calculate margins to center knob in container
	// Use jquery so we can avoid calculating border/padding in the CSS declaration
	cssPositionRotateKnobBody.css({
		"margin-top":-(cssPositionRotateKnobBody.outerHeight()/2),
		"margin-left":-(cssPositionRotateKnobBody.outerWidth()/2),
	})

	var cssPositionRotateKnob = new Knob(function(knobData) {
			var rotateText = 'rotate('+(-knobData.indicator.angle)+'deg)';
			cssPositionRotateKnobIndicator.css({
				left: knobData.indicator.x - cssPositionRotateKnobIndicator.outerWidth()/2,
				top:  knobData.indicator.y - cssPositionRotateKnobIndicator.outerHeight()/2,
				'transform': rotateText,
				'-moz-transform': rotateText,
				'-o-transform': rotateText,
				'-webkit-transform': rotateText
			});
		}, {
		angleStart:-400,
		angleEnd:360,
		indicatorRadius: cssPositionRotateKnobBody.outerWidth()/2-cssPositionRotateKnobIndicator.outerWidth()/2 - 5,
		indicatorStartAngle: 0,
		indicatorAutoPosition: true,
		indicatorAutoRotate: true
	});




	setupKnob(cssPositionKnob, cssPositionKnobContainer);
	setupKnob(cssRotateKnob, cssRotateKnobContainer);
	setupKnob(cssPositionRotateKnob, cssPositionRotateKnobContainer);

	</script>


</body>
</html>
